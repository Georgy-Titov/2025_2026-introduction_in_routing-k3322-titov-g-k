name: lab_1

mgmt:
  network: statics
  ipv4-subnet: 192.168.120.0/24

topology:
  nodes:
    R1:
      kind: vr-mikrotik_ros
      image: vrnetlab/mikrotik_routeros:6.47.9
      mgmt-ipv4: 192.168.120.100
      startup-config: ./configs/r1.rsc

    SW1:
      kind: vr-ros
      image: vrnetlab/mikrotik_routeros:6.47.9
      mgmt-ipv4: 192.168.120.2
      startup-config: ./configs/sw1.rsc

    SW2:
      kind: vr-ros
      image: vrnetlab/mikrotik_routeros:6.47.9
      mgmt-ipv4: 192.168.120.3
      startup-config: ./configs/sw2.rsc

    SW3:
      kind: vr-ros
      image: vrnetlab/mikrotik_routeros:6.47.9
      mgmt-ipv4: 192.168.120.4
      startup-config: ./configs/sw3.rsc

    PC1:
      kind: linux
      image: debian:stable-slim
      binds:
      - ./configs:/configs
      mgmt-ipv4: 192.168.120.5
      exec:
      - sh -c "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y isc-dhcp-client iproute2 iputils-ping && sh /configs/pc1.sh"

    PC2:
      kind: linux
      image: debian:stable-slim
      binds:
      - ./configs:/configs
      mgmt-ipv4: 192.168.120.6
      exec:
      - sh -c "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y isc-dhcp-client iproute2 iputils-ping && sh /configs/pc2.sh"

  links:
  - endpoints: ["R1:eth2", "SW1:eth2"]
  - endpoints: ["SW1:eth3", "SW2:eth2"]
  - endpoints: ["SW1:eth4", "SW3:eth2"]
  - endpoints: ["SW2:eth3", "PC1:eth2"]
  - endpoints: ["SW3:eth3", "PC2:eth2"]